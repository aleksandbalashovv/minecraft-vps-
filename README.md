# minecraft-vps-(Step2)
## Minecraft Server Infrastructure
---------------------------------
Приватный Minecraft-сервер, развёрнутый на VPS с использованием Docker.
Репозиторий фиксирует архитектуру, решения и практики эксплуатации сервиса.
Проект не является игровым гайдом.

Фокус — на инфраструктуре, изоляции среды и управлении состоянием.
Назначение репозитория
зафиксировать архитектурные решения
сохранить контекст инженерных шагов
обеспечить воспроизводимость
использовать как портфолио-кейс
иметь точку возврата для дальнейшего развития
---------------------------------------------
## Архитектурный подход
сервер работает независимо от SSH-сессий
процесс изолирован в контейнере
данные вынесены за пределы контейнера
управление осуществляется через Docker
доступ строго ограничен
автоматические бэкапы
Среда
VPS
Ubuntu 24.04
пользователь minecraft (non-root)
доступ по SSH-ключу (ed25519)
Runtime
Docker daemon (systemd)
Docker Compose
политика рестарта контейнера включена
Используемый стек
Компонент	Версия
Minecraft	1.21.11
Java	21
Docker image	itzg/minecraft-server
Контейнеризация	Docker
Управление	Docker Compose

## Структура проекта
--------------------
minecraft-server/
├── docker-compose.yml
├── data/
│   ├── world/                # Мир Minecraft (критичный объект)
│   ├── server.properties     # Конфигурация сервера
│   ├── whitelist.json        # Список разрешённых игроков
│   ├── ops.json              # Администраторы
│   └── logs/                 # Логи Minecraft
├── scripts/
│   └── backup.sh             # Скрипт резервного копирования
├── logs/
│   └── backup.log            # Логи бэкапов
└── CONTRACT.md               # Границы ролей и ответственности

Критичный объект системы — data/world.
Остальные файлы являются производными.

# Жизненный цикл сервера
## Запуск сервера 
cd ~/minecraft-server
docker-compose up -d

## Остановка 
docker-compose down

## Перезагрузка 
docker-compose restart

## Проверка состояния 
docker ps
docker logs --tail=50 minecraft
Ожидаемый результат 
Done (...)! For help, type "help"

## Модель доступа 
Осознанный офлайн 
online-mode=false
white-list=true
enforce-whitelist=true

Причины:
все участники используют нелицензионные клиенты
проверка Mojang отключена
контроль доступа осуществляется через whitelist
Особенности:
ник игрока является идентификатором
whitelist всегда включён
сервер остаётся приватным
Почему - сервер находиться на стадии разработки.

## Управление сервером
Подключение к консоли Minecraft
docker attach minecraft
Команды вводятся:
без символа /
латиницей
Корректный выход: 
Ctrl + P
Ctrl + Q

## Резервное копирование
выполняется автоматически через cron
скрипт: scripts/backup.sh
объект бэкапа: data/world
логирование: logs/backup.log
Мир является единственным объектом, требующим резервного копирования.

## Поведение при сбоях
Потеря SSH-соединения
Вмешательство не требуется.
Контейнер продолжает работу.
Падение сервера

docker-compose restart
Перезагрузка VPS
Docker автоматически поднимает контейнер.

## Осознанно не используется
screen
tmux
ручной запуск java -jar
запуск от root
публичный доступ

## Инженерные наблюдения
Docker заменяет терминальные менеджеры сессий
SSH — это канал управления, а не среда выполнения
контейнер и данные — разные уровни ответственности
инфраструктура должна быть воспроизводимой
даже игровой сервер является полноценной сервисной системой


## Текущий этап
инфраструктура стабилизирована
сервер работает
доступ ограничен
идёт эксплуатация и развитие мира

## Статус репозитория
Репозиторий используется как:
инженерная фиксация решений
точка возврата контекста
основа для дальнейшего расширения



